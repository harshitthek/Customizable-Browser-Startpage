/* --- THEME ENGINE --- */
:root, [data-theme='slate'] {
    --bg-gradient: linear-gradient(135deg, #0f172a, #1e2d3b);
    --text-primary: #e2e8f0;
    --text-secondary: #94a3b8;
    --accent-color: #3b82f6;
    --link-bg: rgba(255, 255, 255, 0.05); /* Base background for link item */
    --link-bg-hover: rgba(255, 255, 255, 0.1); /* Background on anchor hover */
    --panel-bg: #1e2d3b;
    --input-bg: #0f172a;
    --input-border: #334155;
    --btn-secondary-bg: #475569;
    --flashlight-color: rgba(255, 255, 255, 0.15);
}
[data-theme='light'] {
    --bg-gradient: linear-gradient(135deg, #f1f5f9, #e2e8f0);
    --text-primary: #1e293b;
    --text-secondary: #475569;
    --accent-color: #ef4444;
    --link-bg: rgba(0, 0, 0, 0.03);
    --link-bg-hover: rgba(0, 0, 0, 0.07);
    --panel-bg: #f8fafc;
    --input-bg: #ffffff;
    --input-border: #cbd5e1;
    --btn-secondary-bg: #94a3b8;
    --flashlight-color: rgba(0, 0, 0, 0.1);
}
[data-theme='ocean'] {
    --bg-gradient: linear-gradient(135deg, #005c97, #363795);
    --text-primary: #ffffff;
    --text-secondary: #a3c1d9;
    --accent-color: #f59e0b;
    --link-bg: rgba(255, 255, 255, 0.1);
    --link-bg-hover: rgba(255, 255, 255, 0.2);
    --panel-bg: #004a7c;
    --input-bg: #00375e;
    --input-border: #363795;
    --btn-secondary-bg: #363795;
    --flashlight-color: rgba(255, 255, 255, 0.2);
}
/* --- Base Styles --- */
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
    background: var(--bg-gradient);
    color: var(--text-primary);
    font-family: "Segoe UI", sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    transition: background 0.5s ease, color 0.5s ease;
    padding: 20px;
    overflow: hidden; /* Prevent scrollbars from flashlight */
}
main { display: flex; flex-direction: column; align-items: center; gap: 20px; width: 100%; z-index: 1; }
main.blurred { filter: blur(4px); transition: filter 0.3s ease; } /* Added transition */
.container { text-align: center; }
#greeting { font-size: 50px; font-weight: 600; }
#clock { font-size: 80px; font-weight: bold; margin-top: 10px; color: var(--accent-color); transition: color 0.5s ease; }
/* Removed clock tick animation styles as JS handles it if needed */
#date { font-size: 1.2rem; opacity: 0.8; margin-top: 5px; color: var(--text-secondary); }
#name { cursor: pointer; color: var(--accent-color); transition: color 0.5s ease; }
#name:hover { text-decoration: underline; }

/* --- Links Section --- */
#links-container { display: flex; justify-content: center; align-items: flex-start; flex-wrap: wrap; gap: 25px; padding: 20px; max-width: 900px; width: 100%; }
.link-item { position: relative; width: 120px; border-radius: 12px; background-color: var(--link-bg); transition: transform 0.2s ease; overflow: hidden; }
.link-item:hover { transform: translateY(-4px); }
.link-anchor { display: flex; flex-direction: column; align-items: center; gap: 10px; padding: 15px 10px; text-decoration: none; color: inherit; cursor: pointer; transition: background-color 0.2s ease; z-index: 1; position: relative; }
.link-anchor:hover { background-color: var(--link-bg-hover); }
.icon-container { width: 80px; height: 80px; display: flex; justify-content: center; align-items: center; border-radius: 16px; overflow: hidden; }
.favicon { width: 100%; height: 100%; object-fit: cover; border-radius: 16px; box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
.fallback-icon { width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; background-color: var(--accent-color); color: white; font-size: 40px; font-weight: bold; border-radius: 16px; box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
.link-name { font-size: 15px; font-weight: 500; width: 100%; text-align: center; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.link-actions { position: absolute; top: 8px; right: 8px; display: flex; gap: 5px; z-index: 2; opacity: 0; transform: translateY(-5px); pointer-events: none; transition: all 0.2s ease; }
.link-item:hover .link-actions { opacity: 1; transform: translateY(0); pointer-events: auto; }
.edit-btn, .delete-btn { background-color: rgba(0,0,0,0.4); color: white; border: none; border-radius: 50%; width: 24px; height: 24px; font-size: 12px; display: flex; justify-content: center; align-items: center; cursor: pointer; transition: background-color 0.2s; }
.edit-btn { font-size: 14px; }
.edit-btn:hover, .delete-btn:hover { background-color: rgba(0,0,0,0.6); }

/* --- FLASHLIGHT EFFECT --- */
.link-item::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; border-radius: inherit; background: radial-gradient( circle 150px at var(--mouse-x, 50%) var(--mouse-y, 50%), var(--flashlight-color), transparent 80% ); opacity: 0; transition: opacity 0.3s ease; pointer-events: none; z-index: 0; }
.link-item:hover::before, body.flashlight-on .link-item::before { opacity: 1; }

/* --- UI Controls & Panels --- */
.top-right-controls { position: fixed; top: 20px; right: 20px; display: flex; align-items: center; /* Align items vertically */ gap: 10px; /* Reduced gap */ z-index: 1002; }
.top-right-controls button { background: none; border: none; font-size: 24px; color: var(--text-primary); opacity: 0.7; cursor: pointer; transition: opacity 0.2s, transform 0.2s; padding: 5px; /* Add padding for better click area */ line-height: 1; /* Ensure icons align well */ }
.top-right-controls button:hover { opacity: 1; transform: scale(1.1); }
#flashlight-btn.active { opacity: 1; filter: drop-shadow(0 0 5px var(--accent-color)); } /* Removed redundant transform */

/* NEW/RESTORED Styles specifically for the Add Link Button */
#add-link-btn {
    background-color: var(--accent-color); /* Use accent color */
    color: white; /* White '+' sign */
    border-radius: 50%;
    width: 34px; /* Slightly smaller to fit with icons */
    height: 34px;
    font-size: 24px;
    font-weight: bold;
    display: flex;
    justify-content: center;
    align-items: center;
    opacity: 0.8; /* Keep consistent opacity */
    box-shadow: 0 2px 5px rgba(0,0,0,0.2); /* Add subtle shadow */
}
#add-link-btn:hover {
    opacity: 1;
    transform: scale(1.1); /* Keep hover effect */
    background-color: var(--accent-color); /* Ensure background remains */
}


.panel { background-color: var(--panel-bg); border-radius: 8px; box-shadow: 0 5px 15px rgba(0,0,0,0.3); padding: 15px; position: fixed; z-index: 1001; opacity: 0; visibility: hidden; transform: translateY(10px); transition: opacity 0.2s ease, visibility 0.2s ease, transform 0.2s ease; }
.panel:not(.hidden) { opacity: 1; visibility: visible; transform: translateY(0); }
#context-menu { width: 150px; display: flex; flex-direction: column; gap: 5px; }
#context-menu button { background: none; border: none; color: var(--text-primary); padding: 8px 12px; text-align: left; border-radius: 4px; cursor: pointer; width: 100%; }
#context-menu button:hover { background-color: var(--link-bg-hover); }
.modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.6); display: flex; justify-content: center; align-items: center; z-index: 1000; opacity: 0; visibility: hidden; transition: opacity 0.3s ease, visibility 0.3s ease; }
.modal-overlay:not(.hidden) { opacity: 1; visibility: visible; }
.modal-content { width: 90%; max-width: 400px; transform: scale(0.95); transition: transform 0.3s ease; /* Inherits .panel styles */ }
.modal-overlay:not(.hidden) .modal-content { transform: scale(1); }
.modal-content h2 { margin-top: 0; margin-bottom: 20px; }
.close-btn { position: absolute; top: 10px; right: 15px; background: none; border: none; font-size: 24px; color: var(--text-primary); cursor: pointer; }
.form-group { margin-bottom: 15px; }
.form-group label { display: block; margin-bottom: 5px; }
.form-group input { width: 100%; padding: 8px; border-radius: 4px; border: 1px solid var(--input-border); background-color: var(--input-bg); color: var(--text-primary); }
.form-buttons { display: flex; justify-content: flex-end; gap: 10px; margin-top: 20px; }
.form-buttons button { padding: 8px 15px; border: none; border-radius: 4px; cursor: pointer; }
.btn-primary { background-color: #3b82f6; color: white; }
.btn-secondary { background-color: var(--btn-secondary-bg); color: white; }
#theme-panel { top: 60px; right: 20px; width: 200px; display: flex; flex-direction: column; gap: 10px; }
#theme-panel.custom-view h3, #theme-panel.custom-view .theme-option { display: none; }
.theme-option { padding: 8px 12px; border: 1px solid var(--input-border); background-color: var(--input-bg); color: var(--text-primary); border-radius: 4px; cursor: pointer; text-align: left; }
.theme-option:hover { background-color: var(--link-bg-hover); }
#custom-theme-panel.hidden { display: none; }
#custom-theme-panel { border-top: 1px solid var(--input-border); margin-top: 10px; padding-top: 10px; }
.color-picker-group { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
.color-picker-group label { font-size: 14px; }
.color-picker-group input[type="color"] { width: 60px; height: 30px; border: 1px solid var(--input-border); padding: 2px; background: none; cursor: pointer; }
/* --- Responsiveness --- */
@media (max-width: 600px) {
    .top-right-controls { top: 10px; right: 10px; gap: 8px; } /* Adjusted gap */
    #theme-panel { top: 50px; right: 10px; }
    #greeting { font-size: 35px; }
    #clock { font-size: 55px; }
    #date { font-size: 1rem; }
    /* Adjust button sizes for mobile */
     .top-right-controls button { font-size: 20px; padding: 4px; }
     #add-link-btn { width: 30px; height: 30px; font-size: 20px; }
}

/* --- Scrollbar Styling --- */
::-webkit-scrollbar {
    width: 8px;
}       

::-webkit-scrollbar-thumb {
    background-color: var(--accent-color);
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background-color: darken(var(--accent-color), 10%);
}
::-webkit-scrollbar-track {
    background: transparent;
}
::-webkit-scrollbar-track:hover {
    background: transparent;
}
